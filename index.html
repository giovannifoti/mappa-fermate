<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <!-- SEO & Social -->
  <title>Quando Passa – Fermate Autobus Messina</title>
  <meta
    name="description"
    content="Trova in tempo reale le fermate dell'autobus a Messina, consulta orari e salva i preferiti."
  />
  <link rel="canonical" href="https://tuosito.it/" />
  <meta property="og:title" content="Quando Passa – Fermate Autobus Messina" />
  <meta
    property="og:description"
    content="Consulta le fermate, salva i preferiti e ottieni l’orario esatto del prossimo bus."
  />
  <meta property="og:image" content="https://tuosito.it/og-image.png" />
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="theme-color" content="#003366" />

  <!-- Performance hints -->
  <link rel="preconnect" href="https://unpkg.com" crossorigin />
  <link
    rel="preload"
    as="style"
    href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
    integrity="sha384-XXXXXXXX"
    crossorigin=""
  />

  <!-- Main Stylesheet -->
  <link rel="stylesheet" href="style.css" />

  <!-- Leaflet & MarkerCluster CSS -->
  <link
    rel="stylesheet"
    href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
    integrity="sha384-XXXXXXXX"
    crossorigin=""
  />
  <link
    rel="stylesheet"
    href="https://unpkg.com/leaflet.markercluster@1.5.3/dist/MarkerCluster.css"
    integrity="sha384-YYYYYYYY"
    crossorigin=""
  />
  <link
    rel="stylesheet"
    href="https://unpkg.com/leaflet.markercluster@1.5.3/dist/MarkerCluster.Default.css"
    integrity="sha384-ZZZZZZZZ"
    crossorigin=""
  />

  <link rel="icon" type="image/png" href="logo_sito.png" />
</head>

<body>

  <header class="top-bar" role="banner">
    <label for="searchInput" class="sr-only">Cerca una fermata</label>
    <input
      type="text"
      id="searchInput"
      placeholder="🔍 Cerca una fermata..."
      autocomplete="off"
    />

    <button
      id="locateBtn"
      title="Trova la fermata più vicina"
      aria-label="Trova la fermata più vicina"
    >
      📍
    </button>

    <button
      id="darkToggle"
      role="switch"
      aria-checked="false"
      aria-label="Attiva/disattiva dark mode"
    >
      🌙
    </button>
  </header>

  <div id="suggestions" class="suggestions" role="listbox"></div>
  <div id="nearestStop" class="nearest-info" aria-live="polite"></div>
  <div id="map" class="map" role="application" aria-label="Mappa delle fermate"></div>

  <button
    id="open-favorites"
    class="favorites-btn"
    aria-label="Mostra fermate preferite"
  >
    ⭐
  </button>

  <aside
    id="favorites-popup"
    class="favorites-popup"
    role="dialog"
    aria-modal="true"
    aria-hidden="true"
  >
    <div class="fav-popup-content">
      <button
        id="close-favorites"
        class="close-btn"
        aria-label="Chiudi preferiti"
      >
        &times;
      </button>
      <h2>Le tue fermate preferite</h2>
      <ul id="favorites-list"></ul>
    </div>
  </aside>

  <!-- Leaflet & MarkerCluster JS -->
  <script
    src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
    integrity="sha384-AAAAAAA"
    crossorigin=""
    defer
  ></script>
  <script
    src="https://unpkg.com/leaflet.markercluster@1.5.3/dist/leaflet.markercluster.js"
    integrity="sha384-BBBBBBB"
    crossorigin=""
    defer
  ></script>

  <!-- Main Application Logic -->
  <script src="main.js" defer></script>

  <!-- GoatCounter Analytics -->
  <script
    data-goatcounter="https://giovannifoti.goatcounter.com/count"
    async
    src="https://gc.zgo.at/count.js"
  ></script>
</body>
</html>
